# Запуск проекта

Откройте три терминала.

В первом выполните:

npx hardhat node --port 8545


Во втором — запустите вторую локальную сеть:

npx hardhat node --port 8546


В третьем терминале перейдите в папку backend и выполните:

make run


Эта команда автоматически скомпилирует и задеплоит смарт-контракты, а затем запустит сервер приложения.

# Архитектура кроссчейн-моста

Для каждой сети разворачиваются собственные контракты токена и моста.

# Токен

Реализует систему ролей и управление доступом.

Имеет функции mint и burn, каждая из которых доступна только соответствующим ролям.

# Мост

Также использует ролевую модель (роли назначаются через grantRole, предоставляемую библиотекой).

Выпуск (mint) токенов разрешён только участникам с ролью оператора — по умолчанию это адрес деплоера моста.

Функция deposit доступна всем пользователям сети. Если баланс недостаточен, транзакция отклоняется на этапе burn.

# Сервер

Отслеживает событие Deposit и, получив его, инициирует выпуск токенов в целевой сети (от имени моста).

Также фиксирует событие Withdraw, но не выполняет действий, кроме логирования.

# Алгоритм перевода токенов между сетями

Убедитесь, что в первой сети на балансе есть достаточное количество токенов.

Вызовите метод Deposit контракта моста в первой сети, указав параметры перевода (amount <= X).

Далее сервер автоматически обработает событие:

прослушает Deposit,

выполнит burn в исходной сети,

инициирует mint в целевой.

Каждый депозит должен иметь уникальный depositId, иначе перевод будет отклонён, даже при наличии средств.

# Аккаунты

Развёртывание токена и моста в каждой сети выполняется от аккаунта №0
(0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266).

Переводы токенов происходят между аккаунтами №7 в обеих сетях
(0x14dc79964da2c08b23698b3d3cc7ca32193d9955).

Список всех аккаунтов можно посмотреть в консоли после запуска:

npx hardhat node